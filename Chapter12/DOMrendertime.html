<html>
  <body>
    <p><span id="one"></span></p>
    <p><span id="two"></span></p>
    <script>
      function time(name, action) {
      let start = Date.now()
      action()
      console.log(name, "took", Date.now() - start, "ms")
      }
      time("naive", function() {
      let target = document.getElementById("one")
      while (target.offsetWidth < 2000)
      target.appendChild(document.createTextNode("X"))
      })
      time("clever", function() {
      let target = document.getElementById("two")
      target.appendChild(document.createTextNode("XXXX"))
      let total = Math.ceil(2000 / (target.offsetWidth / 5))
      for (let i = 5; i < total; i++)
      target.appendChild(document.createTextNode("X"))
      })
      </script>
    </body>
  </html>
